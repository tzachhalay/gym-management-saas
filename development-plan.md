# תוכנית פיתוח: אפליקציית ניהול חדרי כושר (Multi-Tenant SaaS)

## מבוא
המערכת נועדה לנהל חדרי כושר בכמה רמות (לקוח, מנהל חדר כושר, מנהל מערכת) במודל של SaaS, המאפשר הפרדה מלאה בין נתונים של חדרי כושר שונים.

---

## שלב 1: ארכיטקטורה ותשתית (Phase 1: Setup & Architecture)
- [ ] **הקמת הפרויקט:** אתחול פרויקט Next.js חדש עם TypeScript ו-Tailwind CSS.
- [ ] **תשתית Supabase:** הקמת פרויקט ב-Supabase והגדרת חיבור לאפליקציה.
- [ ] **מודל Multi-Tenancy:** החלטה על מבנה ה-URL (לדוגמה: `gym.app/gym-id` או תתי-דומיינים).

---

## שלב 2: תכנון מסד הנתונים (Phase 2: Database Schema)
- [ ] **טבלת `gyms`:** שם, לוגו, הגדרות, מזהה ייחודי.
- [ ] **טבלת `profiles`:** פרטי משתמשים (שיוך ל-gym_id, תפקיד: Admin/SuperAdmin/Customer).
- [ ] **טבלת `memberships`:** סוגי מנויים, מחירים, תוקף.
- [ ] **טבלת `classes`:** יומן אימונים, שעות, מאמנים, מגבלת משתתפים.
- [ ] **טבלת `bookings`:** רישום לקוחות לאימונים.
- [ ] **טבלת `payments`:** תיעוד עסקאות וסטטוס תשלום.

---

## שלב 3: אימות והרשאות (Phase 3: Auth & RBAC)
- [ ] **הגדרת Auth:** חיבור Supabase Auth.
- [ ] **Role-Based Access Control (RBAC):** הגדרת חוקי גישה (RLS) ב-Supabase כך שכל משתמש יראה רק מה שרלוונטי ל-gym_id שלו ולתפקידו.

---

## שלב 4: ממשק מנהל מערכת (Phase 4: Super Admin Dashboard)
- [ ] **יצירת חדרי כושר:** טופס להקמת חדר כושר חדש במערכת.
- [ ] **ניהול גלובלי:** צפייה בכל חדרי הכושר הפעילים וסטטיסטיקות כלליות.

---

## שלב 5: ממשק מנהל חדר כושר (Phase 5: Gym Admin Dashboard)
- [ ] **ניהול לקוחות:** רשימת מתאמנים, הוספה/עריכה, מעקב מנויים.
- [ ] **ניהול יומן:** יצירת אימונים וחוגים, ניהול רשימות המתנה.
- [ ] **הגדרות סליקה:** חיבור API Key של חברת הסליקה (Stripe/PayPlus).

---

## שלב 6: ממשק לקוח (Phase 6: Customer App)
- [ ] **דף נחיתה לחדר כושר:** הצגת מידע על המקום.
- [ ] **רישום לאימונים:** ממשק יומן אינטראקטיבי להזמנת מקום.
- [ ] **אזור אישי:** צפייה במצב המנוי ובהיסטוריית האימונים.

---

## שלב 7: אינטגרציית תשלומים (Phase 7: Payment Integration)
- [ ] **הטמעת סליקה:** חיבור דף תשלום (Hosted Payment Page) לרכישת מנוי.
- [ ] **Webhook:** עדכון אוטומטי של תוקף המנוי ב-Database לאחר אישור תשלום.

---

## שלב 8: בדיקות והשקה (Phase 8: Testing & Launch)
- [ ] **בדיקות תאימות:** וודוא שהפרדת הנתונים בין חדרי כושר עובדת בצורה מושלמת.
- [ ] **בדיקות רספונסיביות:** התאמה מלאה למובייל (חשוב במיוחד למתאמנים).
- [ ] **פריסה (Deployment):** העלאה ל-Vercel.
